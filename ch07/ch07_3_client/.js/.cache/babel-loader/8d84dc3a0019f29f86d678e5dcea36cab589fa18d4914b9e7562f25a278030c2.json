{"ast":null,"code":"var _jsxFileName = \"C:\\\\rcp\\\\ch06\\\\ch06_3\\\\src\\\\contexts\\\\AuthContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useCallback, useState } from \"react\";\nimport * as U from \"../utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({\n  signup: (email, password, callback) => {},\n  login: (email, password, callback) => {},\n  logout: callback => {}\n});\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [loggedUser, setLoggedUser] = useState(undefined);\n  const signup = useCallback((email, password, callback) => {\n    const user = {\n      email,\n      password\n    };\n    setLoggedUser(notUsed => ({\n      email,\n      password\n    }));\n    U.writeObjectP(\"user\", user).finally(() => callback && callback());\n    callback && callback();\n  }, []);\n  const login = useCallback((email, password, callback) => {\n    setLoggedUser(notUsed => ({\n      email,\n      password\n    }));\n    callback && callback();\n  }, []);\n  const logout = useCallback(callback => {\n    callback && callback();\n  }, []);\n  const value = {\n    loggedUser,\n    signup,\n    login,\n    logout\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 10\n  }, this);\n};\n_s(AuthProvider, \"necqYJKtbbLX0TR83pdRZLQaMa4=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useCallback","useState","U","jsxDEV","_jsxDEV","AuthContext","signup","email","password","callback","login","logout","AuthProvider","children","_s","loggedUser","setLoggedUser","undefined","user","notUsed","writeObjectP","finally","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["C:/rcp/ch06/ch06_3/src/contexts/AuthContext.tsx"],"sourcesContent":["import type {FC, PropsWithChildren} from \"react\"\r\nimport {createContext, useContext, useCallback, useState} from \"react\"\r\nimport * as U from \"../utils\"\r\n\r\nexport type LoggedUser = {email: string; password: string}\r\ntype Callback = () => void\r\n\r\ntype ContextType = {\r\n  loggedUser?: LoggedUser\r\n  signup: (email: string, password: string, callback?: Callback) => void\r\n  login: (email: string, password: string, callback?: Callback) => void\r\n  logout: (callback?: Callback) => void\r\n}\r\n\r\nexport const AuthContext = createContext<ContextType>({\r\n  signup: (email: string, password: string, callback?: Callback) => {},\r\n  login: (email: string, password: string, callback?: Callback) => {},\r\n  logout: (callback?: Callback) => {}\r\n})\r\n\r\ntype AuthProviderProps = {}\r\n\r\nexport const AuthProvider: FC<PropsWithChildren<AuthProviderProps>> = ({children}) => {\r\n  const [loggedUser, setLoggedUser] = useState<LoggedUser | undefined>(undefined)\r\n  const signup = useCallback((email: string, password: string, callback?: Callback) => {\r\n    const user = {email, password}\r\n    setLoggedUser(notUsed => ({email, password}))\r\n    U.writeObjectP(\"user\", user).finally(() => callback && callback())\r\n    callback && callback()\r\n  }, [])\r\n  const login = useCallback((email: string, password: string, callback?: Callback) => {\r\n    setLoggedUser(notUsed => ({email, password}))\r\n    callback && callback()\r\n  }, [])\r\n  const logout = useCallback((callback?: Callback) => {\r\n    callback && callback()\r\n  }, [])\r\n  const value = {\r\n    loggedUser,\r\n    signup,\r\n    login,\r\n    logout\r\n  }\r\n  return <AuthContext.Provider value={value} children={children} />\r\n}\r\nexport const useAuth = () => {\r\n  return useContext(AuthContext)\r\n}\r\n"],"mappings":";;;AACA,SAAQA,aAAa,EAAEC,UAAU,EAAEC,WAAW,EAAEC,QAAQ,QAAO,OAAO;AACtE,OAAO,KAAKC,CAAC,MAAM,UAAU;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAY7B,OAAO,MAAMC,WAAW,gBAAGP,aAAa,CAAc;EACpDQ,MAAM,EAAEA,CAACC,KAAa,EAAEC,QAAgB,EAAEC,QAAmB,KAAK,CAAC,CAAC;EACpEC,KAAK,EAAEA,CAACH,KAAa,EAAEC,QAAgB,EAAEC,QAAmB,KAAK,CAAC,CAAC;EACnEE,MAAM,EAAGF,QAAmB,IAAK,CAAC;AACpC,CAAC,CAAC;AAIF,OAAO,MAAMG,YAAsD,GAAGA,CAAC;EAACC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EACpF,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGf,QAAQ,CAAyBgB,SAAS,CAAC;EAC/E,MAAMX,MAAM,GAAGN,WAAW,CAAC,CAACO,KAAa,EAAEC,QAAgB,EAAEC,QAAmB,KAAK;IACnF,MAAMS,IAAI,GAAG;MAACX,KAAK;MAAEC;IAAQ,CAAC;IAC9BQ,aAAa,CAACG,OAAO,KAAK;MAACZ,KAAK;MAAEC;IAAQ,CAAC,CAAC,CAAC;IAC7CN,CAAC,CAACkB,YAAY,CAAC,MAAM,EAAEF,IAAI,CAAC,CAACG,OAAO,CAAC,MAAMZ,QAAQ,IAAIA,QAAQ,CAAC,CAAC,CAAC;IAClEA,QAAQ,IAAIA,QAAQ,CAAC,CAAC;EACxB,CAAC,EAAE,EAAE,CAAC;EACN,MAAMC,KAAK,GAAGV,WAAW,CAAC,CAACO,KAAa,EAAEC,QAAgB,EAAEC,QAAmB,KAAK;IAClFO,aAAa,CAACG,OAAO,KAAK;MAACZ,KAAK;MAAEC;IAAQ,CAAC,CAAC,CAAC;IAC7CC,QAAQ,IAAIA,QAAQ,CAAC,CAAC;EACxB,CAAC,EAAE,EAAE,CAAC;EACN,MAAME,MAAM,GAAGX,WAAW,CAAES,QAAmB,IAAK;IAClDA,QAAQ,IAAIA,QAAQ,CAAC,CAAC;EACxB,CAAC,EAAE,EAAE,CAAC;EACN,MAAMa,KAAK,GAAG;IACZP,UAAU;IACVT,MAAM;IACNI,KAAK;IACLC;EACF,CAAC;EACD,oBAAOP,OAAA,CAACC,WAAW,CAACkB,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAACT,QAAQ,EAAEA;EAAS;IAAAW,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACnE,CAAC;AAAAb,EAAA,CAtBYF,YAAsD;AAAAgB,EAAA,GAAtDhB,YAAsD;AAuBnE,OAAO,MAAMiB,OAAO,GAAGA,CAAA,KAAM;EAAAC,GAAA;EAC3B,OAAO/B,UAAU,CAACM,WAAW,CAAC;AAChC,CAAC;AAAAyB,GAAA,CAFYD,OAAO;AAAA,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}